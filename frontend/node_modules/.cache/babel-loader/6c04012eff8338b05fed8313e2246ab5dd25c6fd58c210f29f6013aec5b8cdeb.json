{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import Card from'../components/common/Card';import Table from'../components/common/Table';import Input from'../components/common/Input';import PageHeader from'../components/common/PageHeader';import FormContainer from'../components/common/FormContainer';import SearchBar from'../components/common/SearchBar';import useFetch from'../hooks/useFetch';import{clientsApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Clients=()=>{const navigate=useNavigate();const{data:clients,loading,execute}=useFetch([]);const[searchTerm,setSearchTerm]=useState('');const[showForm,setShowForm]=useState(false);const[formData,setFormData]=useState({name:'',date_of_birth:'',contact_info:'',gender:''});const columns=[{header:'ID',accessor:'id'},{header:'Name',accessor:'name'},{header:'Date of Birth',accessor:'date_of_birth',cell:row=>new Date(row.date_of_birth).toLocaleDateString()},{header:'Contact Info',accessor:'contact_info'},{header:'Gender',accessor:'gender',cell:row=>row.gender?row.gender.charAt(0).toUpperCase()+row.gender.slice(1):'Not specified'},{header:'Programs Enrolled',accessor:'enrollments',cell:row=>row.enrollments&&row.enrollments.length>0?row.enrollments.map(e=>e.program_name).join(', '):'Not enrolled'}];useEffect(()=>{fetchClients();},[]);const fetchClients=async function(){let search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';await execute(clientsApi.getAll,search);};const handleSearch=term=>{fetchClients(term);};const handleInputChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleSubmit=async e=>{e.preventDefault();try{await clientsApi.create(formData);setFormData({name:'',date_of_birth:'',contact_info:'',gender:''});setShowForm(false);fetchClients();}catch(error){console.error('Error creating client:',error);}};const handleToggleForm=()=>{setShowForm(!showForm);};const handleViewClient=client=>{navigate(`/clients/${client.id}`);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Clients\",subtitle:\"Manage clients in the system\",showAction:true,actionText:showForm?'Cancel':'Register Client',onActionClick:handleToggleForm}),showForm&&/*#__PURE__*/_jsxs(FormContainer,{title:\"Register New Client\",onSubmit:handleSubmit,onCancel:handleToggleForm,submitText:\"Save Client\",children:[/*#__PURE__*/_jsx(Input,{label:\"Client Name\",id:\"name\",name:\"name\",value:formData.name,onChange:handleInputChange,placeholder:\"Enter client name\",required:true}),/*#__PURE__*/_jsx(Input,{label:\"Date of Birth\",id:\"date_of_birth\",name:\"date_of_birth\",type:\"date\",value:formData.date_of_birth,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"gender\",children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"gender\",name:\"gender\",value:formData.gender,onChange:handleInputChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Gender\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsx(Input,{label:\"Contact Information\",id:\"contact_info\",name:\"contact_info\",value:formData.contact_info,onChange:handleInputChange,placeholder:\"Enter contact information\"})]}),/*#__PURE__*/_jsx(SearchBar,{value:searchTerm,onChange:setSearchTerm,onSearch:handleSearch,placeholder:\"Search by name or contact info\"}),/*#__PURE__*/_jsx(Card,{children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center py-4\",children:\"Loading clients...\"}):/*#__PURE__*/_jsx(Table,{columns:columns,data:clients||[],onRowClick:handleViewClient})})]});};export default Clients;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Card","Table","Input","PageHeader","FormContainer","SearchBar","useFetch","clientsApi","jsx","_jsx","jsxs","_jsxs","Clients","navigate","data","clients","loading","execute","searchTerm","setSearchTerm","showForm","setShowForm","formData","setFormData","name","date_of_birth","contact_info","gender","columns","header","accessor","cell","row","Date","toLocaleDateString","charAt","toUpperCase","slice","enrollments","length","map","e","program_name","join","fetchClients","search","arguments","undefined","getAll","handleSearch","term","handleInputChange","value","target","handleSubmit","preventDefault","create","error","console","handleToggleForm","handleViewClient","client","id","children","title","subtitle","showAction","actionText","onActionClick","onSubmit","onCancel","submitText","label","onChange","placeholder","required","type","className","htmlFor","onSearch","onRowClick"],"sources":["C:/Users/HP/CEMA/frontend/src/pages/Clients.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Card from '../components/common/Card';\nimport Table from '../components/common/Table';\nimport Input from '../components/common/Input';\nimport PageHeader from '../components/common/PageHeader';\nimport FormContainer from '../components/common/FormContainer';\nimport SearchBar from '../components/common/SearchBar';\nimport useFetch from '../hooks/useFetch';\nimport { clientsApi } from '../services/api';\n\nconst Clients = () => {\n  const navigate = useNavigate();\n  const { data: clients, loading, execute } = useFetch([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    date_of_birth: '',\n    contact_info: '',\n    gender: '',\n  });\n\n  const columns = [\n    { header: 'ID', accessor: 'id' },\n    { header: 'Name', accessor: 'name' },\n    { \n      header: 'Date of Birth', \n      accessor: 'date_of_birth',\n      cell: (row) => new Date(row.date_of_birth).toLocaleDateString()\n    },\n    { header: 'Contact Info', accessor: 'contact_info' },\n    { \n      header: 'Gender', \n      accessor: 'gender',\n      cell: (row) => row.gender ? row.gender.charAt(0).toUpperCase() + row.gender.slice(1) : 'Not specified'\n    },\n    {\n      header: 'Programs Enrolled',\n      accessor: 'enrollments',\n      cell: (row) => row.enrollments && row.enrollments.length > 0\n        ? row.enrollments.map(e => e.program_name).join(', ')\n        : 'Not enrolled'\n    },\n  ];\n\n  useEffect(() => {\n    fetchClients();\n  }, []);\n\n  const fetchClients = async (search = '') => {\n    await execute(clientsApi.getAll, search);\n  };\n\n  const handleSearch = (term) => {\n    fetchClients(term);\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await clientsApi.create(formData);\n      setFormData({ name: '', date_of_birth: '', contact_info: '', gender: '' });\n      setShowForm(false);\n      fetchClients();\n    } catch (error) {\n      console.error('Error creating client:', error);\n    }\n  };\n\n  const handleToggleForm = () => {\n    setShowForm(!showForm);\n  };\n\n  const handleViewClient = (client) => {\n    navigate(`/clients/${client.id}`);\n  };\n\n  return (\n    <div>\n      <PageHeader \n        title=\"Clients\"\n        subtitle=\"Manage clients in the system\"\n        showAction={true}\n        actionText={showForm ? 'Cancel' : 'Register Client'}\n        onActionClick={handleToggleForm}\n      />\n\n      {showForm && (\n        <FormContainer \n          title=\"Register New Client\" \n          onSubmit={handleSubmit}\n          onCancel={handleToggleForm}\n          submitText=\"Save Client\"\n        >\n          <Input\n            label=\"Client Name\"\n            id=\"name\"\n            name=\"name\"\n            value={formData.name}\n            onChange={handleInputChange}\n            placeholder=\"Enter client name\"\n            required\n          />\n          <Input\n            label=\"Date of Birth\"\n            id=\"date_of_birth\"\n            name=\"date_of_birth\"\n            type=\"date\"\n            value={formData.date_of_birth}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"gender\">\n              Gender\n            </label>\n            <select\n              id=\"gender\"\n              name=\"gender\"\n              value={formData.gender}\n              onChange={handleInputChange}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            >\n              <option value=\"\">Select Gender</option>\n              <option value=\"male\">Male</option>\n              <option value=\"female\">Female</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n          <Input\n            label=\"Contact Information\"\n            id=\"contact_info\"\n            name=\"contact_info\"\n            value={formData.contact_info}\n            onChange={handleInputChange}\n            placeholder=\"Enter contact information\"\n          />\n        </FormContainer>\n      )}\n\n      <SearchBar \n        value={searchTerm}\n        onChange={setSearchTerm}\n        onSearch={handleSearch}\n        placeholder=\"Search by name or contact info\"\n      />\n\n      <Card>\n        {loading ? (\n          <p className=\"text-center py-4\">Loading clients...</p>\n        ) : (\n          <Table \n            columns={columns} \n            data={clients || []}\n            onRowClick={handleViewClient}\n          />\n        )}\n      </Card>\n    </div>\n  );\n};\n\nexport default Clients; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}